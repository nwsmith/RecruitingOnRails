<% content_for :for_head do %>
    <script src="http://api.simile-widgets.org/timeline/2.3.1/timeline-api.js?bundle=true" type="text/javascript"></script>
    <script type="application/javascript">
    </script>
<% end %>

<script type="application/javascript">
    $(document).ready(function () {
        var eventSource = new Timeline.DefaultEventSource();

        var bandInfos = [
            Timeline.createBandInfo({
                <% if @group_by == 'MONTH' %>
                icon: "",
                eventSource: eventSource,
                width: "100%",
                intervalUnit: Timeline.DateTime.MONTH,
                intervalPixels: 25,
                <% end %>
                <% if @group_by == 'YEAR' %>
                icon: "",
                eventSource: eventSource,
                width: "100%",
                intervalUnit: Timeline.DateTime.YEAR,
                intervalPixels: 175
                <% end %>
            })
        ];
        tl = Timeline.create(document.getElementById("my-timeline"), bandInfos);

        Timeline.loadJSON("<%= events_candidates_path %>.json?status=<%=@status_list%>", function (json, url) {
            eventSource.loadJSON(json, url)
        });
    });
</script>
<div id="my-timeline" style="height: 1000px; border: 1px solid #aaa"></div>
